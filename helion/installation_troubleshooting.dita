<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="troubleshooting_installation">
  <title>Troubleshooting the Installation</title>
  <body>
    <section id="troubleshooting"><title>Troubleshooting Tips</title>
      <p><b>Running the <codeph>hos-init.bash</codeph> script when configuring your deployer does
          not complete</b></p>
      <p>Part of what the <codeph>hos-init.bash</codeph> script does in <xref
          href="bare_installation_kvm.dita#install_kvm/HLM_Node_Personalization">step 3 of
          configuring the Deployer</xref> is install git and so if your DNS nameserver is not
        configured or is not funcionting properly in your <codeph>/etc/resolv.conf</codeph> file of
        your deployer node then it won't be able to complete.</p>
      <p>To resolve this issue, double check your nameserver in your
          <codeph>/etc/resolv.conf</codeph> file on your deployer.</p>
      <p><b>How to re-image an existing node</b></p>
      <p>If you've already run the <codeph>cobbler-deploy.yml</codeph> and
          <codeph>bm-reimage.yml</codeph> playbooks and needed to make a change to your
        configuration files or for any other reason need to re-image one of your nodes, you need to
        notify Cobbler in order to do this. The reason for this is that whenever a node has been
        imaged, Cobbler sets a flag, <codeph>netboot-enabled</codeph>, to false to indicate that
        it's already been installed.</p>
      <p>In order to tell Cobbler that you want to re-image it, you can run these commands: <ol>
          <li>To get a list of your system names, use:
            <codeblock>sudo cobbler system list</codeblock></li>
          <li>Notify Cobbler to set the <codeph>netboot-enabled</codeph> flag to true by using:
            <codeblock>ansible-playbook -i hosts/localhost cobbler -e nodelist="&lt;node1>,&lt;node2>..."</codeblock></li>
          <li>Then proceed with your <codeph>cobbler-deploy.yml</codeph> and
              <codeph>bm-reimage.yml</codeph> playbooks again.</li>
        </ol>
      </p>
      <p><b>Change needed to <codeph>baremetalConfig.yml</codeph> file needed after the Cobbler
          deploy</b></p>
      <p>If you've made a mistake or wish to change your <codeph>baremetalConfig.yml</codeph>
        configuration file after you've already run the <codeph>cobbler-deploy.yml</codeph>
        playbook, follow these steps to ensure Cobbler gets updated with the new server
        information:</p>
      <ol>
        <li>Ensure your <codeph>baremetalConfig.yml</codeph> file is updated</li>
        <li>Commit your changes to git:
          <codeblock>cd ~/helion/hos/ansible
git add -A
git commit -m "My config or other commit message"</codeblock></li>
        <li>Determine which nodes you have entered into Cobbler by using:
          <codeblock>sudo cobbler system list</codeblock></li>
        <li>Remove the nodes that had the old information from Cobbler using:
          <codeblock>sudo cobbler system remove --name &lt;nodename></codeblock></li>
        <li>Re-run the <codeph>cobbler-deploy.yml</codeph> and <codeph>bm-reimage.yml</codeph>
          ansible scripts to upload the new node definitions to Cobbler and image the nodes: <codeblock>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost cobbler-deploy.yml
ansible-playbook -i hosts/localhost bm-reimage.yml</codeblock>
          <note>If you need to re-image your nodes, you can add the <codeph>-e nodelist=all</codeph>
            switch to the end of your <codeph>bm-reimage.yml</codeph> command.</note></li>
      </ol>
      <p><b>Change needed to configuration files after you've run the
            <codeph>config-processor-run.yml</codeph> playbook</b></p>
      <p>If you've run the <codeph>config-processor-run.yml</codeph> playbook during the
        installation and have to go back to re-do your steps, ensure that you run the
          <codeph>config-processor-clean.yml</codeph> playbook to clear out your previous
        configuration before proceeding.</p>
      <p><codeblock>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-clean.yml</codeblock></p>
    </section>
  </body>
</topic>
