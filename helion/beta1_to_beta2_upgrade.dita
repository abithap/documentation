<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="beta_upgrade">
  <title>Upgrading from Beta 1 to Beta 2</title>
  <body>
    <p> Upgrade from Beta 1 to Beta 2 is now supported. To perform the upgrade, you must have a
      working deployment of the Beta 1 release. </p>
    <p>To perform the upgrade, follow the steps below. The upgrade will apply updates to HP Helion
      OpenStack services, as well as to the underlying cloud platform. </p>
    <p> The upgrade mechanism included in the Beta2 release is not complete in that it does not
      upgrade the full set of services in the HOS stack. Beta2 will allow users to get experience
      with applying upgrades through HLM. The following set of HOS components are upgraded as part
      of the Beta2 upgrade: <ul>
        <li> HP Linux for HP Helion OpenStack </li>
        <li> sosreport</li>
        <li> monasca-agent</li>
        <li> Openstack clients</li>
        <li> haproxy/keepalived</li>
        <li> Apache</li>
        <li> Swift</li>
        <li> Nova</li>
        <li> Glance</li>
        <li> Neutron</li>
        <li> Cinder</li>
        <li> Heat</li>
        <li> Logging</li>
        <li> Freezer</li>
      </ul>
    </p>
    <p>To upgrade, download the ISO as you would for a beta2 install.<note>You will not be able to
        change your cloud model at this point, other than by adapting it as you did in beta1. You
        may have to merge your current configuration files with the new ones in step 3. </note>
      <ol>
        <li>Log in to the deployer node as the user you created during the beta 1 deployment, and
          mount the beta 2 install media at /media/cdrom, for example:
          <codeblock>sudo mount hLinux-cattleprod-amd64-blaster-netinst-20150901-hlm.&lt;<i>build-date</i>_sha1>.iso /media/cdrom</codeblock>
        </li>
        <li> Unpack the following tarball:
          <codeblock>tar zxvf /media/cdrom/hos-2.0.0/hos-2.0.0-b.2-&lt;whatever timestamp>.tgz</codeblock>
          Run the included initialization script to update the deployer
          <codeblock>~/hos-2.0.0-b.2/hos-init.bash</codeblock>
        </li>
        <li>Prepare the new Ansible tree for the upgrade task: 
          
          <ol id="ol_zzd_rxz_jt">
            <li>Identify any merge conflicts that may have arisen getting doing git status: <codeblock>cd ~/helion
git status</codeblock>
              <p>Note that git status will also tell you what branch you are on. It should be the
                site branch. If git reports merge issues, resolve them by editing the files
                reported, then add and commit:</p>
              <codeblock>git add --all .
git commit -m "your commit message here"</codeblock> More
              information about git and the config processor can be found on the <xref
                href="using_git.dita#topic_u3v_1yz_ct">Using Git page</xref>.</li>
            <li>Run the config processor:
              <codeblock>cd ~/helion/hos/ansible/
ansible-playbook -i hosts/localhost config-processor-run.yml</codeblock>
            </li>
            <li>Run the ready deployment script:
              <codeblock>ansible-playbook -i hosts/localhost ready-deployment.yml</codeblock>
            </li>
          </ol></li>
        <li>Run the upgrade playbook:
          <codeblock>cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts hlm-upgrade.yml</codeblock>
        </li>
      </ol>
    </p>
  </body>
</topic>
