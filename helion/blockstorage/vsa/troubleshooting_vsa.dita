<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_jv4_q1t_tt">
  <title>HP Helion <tm tmtype="reg">OpenStack</tm> 2.0: Troubleshooting the VSA</title>
  <body>
    <p>You can use this guide to help you identify and resolve basic problems you may be
      experiencing with VSA. It contains following troubleshooting scenarios:</p>
    <section><b>Boot from volume fails if you are using a separate iSCSI
          network</b><p><b>Description</b>: When using a separate iSCSI network, if that network is
        not associated with the controllers (now using the force_network_groups option) then boot
        from the volumes would fail (Cinder post installation
          troubleshooting)</p><p><b>Resolution</b></p><p>When you are using a separate iSCSI network
        that network needs to be assigned to the following nodes:<ul id="ul_ijh_dh5_tt">
          <li>Controller nodes</li>
          <li>Compute nodes</li>
          <li>VSA nodes (in the case of StoreVirtual VSA being used)</li>
        </ul></p></section>
    <p>If you want to use a separate iSCSI network then you must define the network in the cloud
      input model of the above listed nodes. Following files must be updated with iSCSI network.<ul
        id="ul_qpr_c35_tt">
        <li>
          <p>networks.yml</p>
          <p>Update the <codeph>network.yml</codeph> file as shown in the sample
            below:<codeblock>- name: NET_ISCSI
  vlanid: 3287
  tagged-vlan: true
  cidr: 172.16.13.0/24 
  gateway-ip: 172.16.13.1 
  network-group: <b>ISCSI</b>  &lt;>this name should remain consistence in all the files.</codeblock></p>
          <p>The network-group name should remain consistent in all the files, in cloud input model,
            which require changes in to implement separate iSCSI network.</p>
        </li>
      </ul></p>
    <ul id="ul_wxs_mbv_tt">
      <li>net_interfaces.yml <p>Update the <codeph>net_interfaces.yml</codeph> file as shown in the
          sample
          below.<codeblock>Interface-models
    - name: INTERFACE_SET_CONTROLLER
      network-interfaces:
        - name: BOND0
          device:
              name: bond0
          bond-data:
             options:
                 mode: "802.3ad"
                 miinon: 200
             provider: linux
             devices:
               - name: Port0_10G1
               - name: Port1_10G1
          network-groups:
            - MGMT
            - TENANT
          <b>forced-network-groups:
            - ISCSI</b></codeblock></p><p>You
          must added the highlighted lines to controller, compute and vsa interfaces. The name of
          network group, i.e. ISCSI should remain consistent in all the files. </p></li>
    </ul>
    <ul id="ul_jld_dcv_tt">
      <li>
        <p>firewall_rules.yml</p>
        <p>Update the <codeph>firewall_rules.yml</codeph> file as shown in the sample
          below.<codeblock>firewall-rules
    - name: PING 
      network-groups:
      - MGMT
      - TENANT
      - EXTERNAL_API
      - <b>ISCSI</b>
      - SWIFT</codeblock></p>
      </li>
    </ul>
    <ul id="ul_dq2_3cv_tt">
      <li>
        <p>network_groups.yml</p>
        <p>Update the <codeph>network_groups.yml</codeph> file as shown in the sample below.</p>
        <p>
          <codeblock>network-groups:
    - name: ISCSI
      hostname-suffix: iscsi
      component-endpoints:
        - vsa</codeblock>
        </p>
      </li>
    </ul>
    <ul id="ul_w5w_mcv_tt">
      <li>server_groups.yml<p>Update the <codeph>server_groups.yml</codeph> file as shown in the
          sample
        below.</p><codeblock>server_groups.yml
      networks:
#       Define the Global networks shared across all the Racks
        - NET_EXTERNAL_API
        - NET_EXTERNAL_VM
        - NET_TENANT
        - NET_MGMT
        - NET_SWIFT
        <b>- NET_ISCSI</b></codeblock></li>
    </ul>
  </body>
</topic>
