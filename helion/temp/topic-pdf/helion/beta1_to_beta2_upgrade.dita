<?xml version="1.0" encoding="utf-8"?><?workdir /C:\Users\sharmabi\git\documentation\helion\temp\topic-pdf\helion?><?workdir-uri file:/C:/Users/sharmabi/git/documentation/helion/temp/topic-pdf/helion/?><?path2project?><?path2project-uri ./?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" id="beta_upgrade" ditaarch:DITAArchVersion="1.2" domains="(topic hi-d)                             (topic ut-d)                             (topic indexing-d)                            (topic hazard-d)                            (topic abbrev-d)                            (topic pr-d)                             (topic sw-d)                            (topic ui-d)    " class="- topic/topic " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="topic:1;3:26">
  <title class="- topic/title " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="title:1;4:10">Upgrading from Beta 2</title>
  <body class="- topic/body " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="body:1;5:9">
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="p:1;6:8"> Upgrade from Beta 2 is now supported. To perform the upgrade, you must have a working
      deployment of the Beta 2 release. </p>
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="p:2;8:8">To perform the upgrade, follow the steps below. The upgrade will apply updates to HP Helion
      OpenStack services, as well as to the underlying cloud platform. </p>
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="p:3;10:8"> The upgrade mechanism included in this release is not complete in that it does not upgrade
      the full set of services in the HOS stack. The following set of  components are upgraded as
      part of the upgrade: <ul class="- topic/ul " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="ul:1;12:32">
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:1;13:13"> Linux for HP Helion </li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:2;14:13"> sosreport</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:3;15:13"> monasca-agent</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:4;16:13"> Openstack clients</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:5;17:13"> haproxy/keepalived</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:6;18:13"> Apache</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:7;19:13"> Swift</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:8;20:13"> Nova</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:9;21:13"> Glance</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:10;22:13"> Neutron</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:11;23:13"> Cinder</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:12;24:13"> Heat</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:13;25:13"> Logging</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:14;26:13"> Freezer</li>
      </ul> If you are running a configuration based on the Beta 2 model configuration, you may
      still use that configuration after upgrading. However, a few changes are required.</p>
    <note class="- topic/note " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="note:1;29:11">The upgrade process is a live upgrade in the sense that VMs, volumes, network resources,
      etc. should survive the upgrade, but can't guarantee no-downtime of the APIs, although such
      downtime is minimized. If an upgrade requires a reboot, then the reboot is left to the
      operator/customer to handle. The upgrade process does not automatically reboot nodes.</note>
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="p:4;33:9"/>
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="p:5;34:8">To upgrade, download the ISO as you would for the install.<note class="- topic/note " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="note:2;34:72">You will not be able to
        change your cloud model at this point, other than by adapting it as you did in beta1. You
        may have to merge your current configuration files with the new ones in step 3. </note>
      <ol class="- topic/ol " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="ol:1;37:11">
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:15;38:13">Log in to the deployer node as the user you created during the beta 2 deployment, and
          mount the new install media at /media/cdrom, for example:
          <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="codeblock:1;40:22">sudo mount hLinux-cattleprod-amd64-blaster-netinst-20150901-hlm.&lt;<i class="+ topic/ph hi-d/i " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="i:1;40:93">build-date</i>_sha1&gt;.iso /media/cdrom</codeblock>
        </li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:16;42:13"> Unpack the following tarball:
          <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="codeblock:2;43:22">tar zxvf /media/cdrom/hos-2.0.0/hos-2.0.0-b.2-&lt;whatever timestamp&gt;.tgz</codeblock>
          Run the included initialization script to update the deployer
          <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="codeblock:3;45:22">~/hos-2.0.0-b.2/hos-init.bash</codeblock>
        </li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:17;47:13">Prepare the new Ansible tree for the upgrade task: <ol id="ol_zzd_rxz_jt" class="- topic/ol " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="ol:2;47:87">
            <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:18;48:17">Identify any merge conflicts that may have arisen getting doing git status: <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="codeblock:4;48:104">cd ~/helion
git status</codeblock>
              <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="p:6;50:18">Note that git status will also tell you what branch you are on. It should be the
                site branch. If git reports merge issues, resolve them by editing the files
                reported, then add and commit:</p>
              <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="codeblock:5;53:26">git add --all .
git commit -m "your commit message here"</codeblock> More
              information about git and the config processor can be found on the <xref href="using_git.dita#topic_u3v_1yz_ct" class="- topic/xref " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="xref:1;56:56" type="topic"><?ditaot usertext?>Using Git page</xref>.</li>
            <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:19;57:17"> Remove any data persisted from the Beta 1 deployment by executing these commands on
              the deployer node to delete the cp-persistent branch and all its persisted data, and
              recreate it. Then switch to the site branch:
              <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="codeblock:6;60:26">stack@hLinux:~$ cd helion
stack@hLinux:~/helion$ git branch -D cp-persistent
stack@hLinux:~/helion$ git checkout -b cp-persistent
stack@hLinux:~/helion $ git checkout site</codeblock>
            </li>
            <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:20;65:17">The recommended filesystem layout of for controller nodes has changed to provide
              better isolation for some services and to reapportion the capacity. The
                <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="b:1;67:20">disk_controller.yml </b>input file included comments to explain the recommended
              layout, which is based on a 500GB volume. <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="p:7;68:61"/>Copy the modified
                <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="b:2;69:20">disks_controller.yml</b> file into your cloud definition
              <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="codeblock:7;70:26">$ cp ~/helion/examples/entry-scale-with-vsa/data/disks_controller*.yml ~/helion/my_cloud/definition/data</codeblock>and
              re-apply any local changes. Note that an alternative layout,
                <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="b:3;72:20">disks_controller_1TB.yml</b>, is now also provided for systems with a larger disc
              capacity. To use this instead, modify the ROLE_CONTROLLER entries in
                <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="b:4;74:20">server_roles.yml</b> to reference DISK_SET_CONTROLLER_1TB, as
              below:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="codeblock:8;75:32">- name: ROLE-CONTROLLER interface-model:
      INTERFACE_SET_CONTROLLER 
      disk-model: DISK_SET_CONTROLLER_1TB</codeblock>
            </li>
            <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:21;79:17">Run the config processor:
              <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="codeblock:9;80:26">cd ~/helion/hos/ansible/
ansible-playbook -i hosts/localhost config-processor-run.yml</codeblock>
            </li>
            <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:22;83:17">Run the ready deployment script:
              <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="codeblock:10;84:26">ansible-playbook -i hosts/localhost ready-deployment.yml</codeblock>
            </li>
          </ol></li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="li:23;87:13">Run the upgrade playbook:
          <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\beta1_to_beta2_upgrade.dita" xtrc="codeblock:11;88:22">cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts hlm-upgrade.yml</codeblock>
        </li>
      </ol>
    </p>
  </body>
</topic>