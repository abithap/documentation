<?xml version="1.0" encoding="utf-8"?><?workdir /C:\Users\sharmabi\git\documentation\helion\temp\topic-pdf\helion\keystone?><?workdir-uri file:/C:/Users/sharmabi/git/documentation/helion/temp/topic-pdf/helion/keystone/?><?path2project ..\?><?path2project-uri ../?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" id="topic_qmz_fg3_bt" ditaarch:DITAArchVersion="1.2" domains="(topic hi-d)                             (topic ut-d)                             (topic indexing-d)                            (topic hazard-d)                            (topic abbrev-d)                            (topic pr-d)                             (topic sw-d)                            (topic ui-d)    " class="- topic/topic " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="topic:1;3:30">
  <title class="- topic/title " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="title:1;4:10">Initial Configuration of the Identity Service</title>
  <body class="- topic/body " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="body:1;5:9">
    <section id="intro" class="- topic/section " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="section:1;6:25"><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="p:1;6:28">The Keystone identity service is a vital part of HP Helion OpenStackÂ®, and as such it is
        installed automatically by the Helion OpenStack installer (just after MySQL and RabbitMQ).
        The recommended way of installing the identity service is to allow the installer to install
        it with the default configuration. Once your cloud is up and running, you can customize
        Keystone in a number of ways, including integration with LDAP servers. </p>
    </section>
    <section id="settings" class="- topic/section " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="section:2;12:28"><title class="- topic/title " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="title:2;12:35">Default Settings</title>
      <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="b:1;13:10">Identity Service Configuration Settings</b> The  identity service configuration options are
      described in the OpenStack documentation on the <xref href="http://docs.openstack.org/kilo/config-reference/content/keystone-configuration-file.html" format="html" scope="external" class="- topic/xref " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="xref:1;16:40"><?ditaot usertext?>identity service configuration file (for Kilo) page</xref> on
      the OpenStack site. <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="p:2;17:30"> </p>
      <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="b:2;18:10">Default Domain and Service Accounts</b><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="p:3;18:52">The "default" domain is automatically created
        during the  installation to contain the various, required OpenStack service accounts
        including the following:</p><ul id="ul_tzb_lpd_bt" class="- topic/ul " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="ul:1;20:60">
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:1;21:13">neutron</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:2;22:13">glance</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:3;23:13">swift-monitor</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:4;24:13">ceilometer</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:5;25:13">swift</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:6;26:13">monasca-agent</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:7;27:13">glance-swift</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:8;28:13">swift-demo</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:9;29:13">nova</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:10;30:13">monascal</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:11;31:13">logging</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:12;32:13">demo </li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:13;33:13">heat</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:14;34:13">cinder</li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="li:15;35:13">admin</li>
      </ul><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="p:4;36:15">These are required accounts and are used by the underlying OpenStack services. These
        accounts should not be removed or reassigned to a different domain. The "default" domain
        should only be used for these service accounts.</p><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="p:5;38:64"/><b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="b:3;38:67">Post-Installation Verification and
        Administration</b><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="p:6;39:30">Keystone query and administration tasks can be performed using the
        OpenStack command line utility. The utility is installed by the installer onto the deployer
        node. Also, the installer installs convenient *.osrc files which contain exports of
        environment variables used by OpenStack CLI.</p><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="p:7;42:60">
        <note class="- topic/note " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="note:1;43:16"/>The identity service administration tasks should be performed by an <i class="+ topic/ph hi-d/i " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="i:1;43:87">admin</i> user
        with a token scoped to the <i class="+ topic/ph hi-d/i " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="i:2;44:39">default</i> domain via the Keystone v3 identity API. These
        settings are preconfigured in the <i class="+ topic/ph hi-d/i " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="i:3;45:46">keystone.osrc</i> file. </p></section>

    <section id="examples" class="- topic/section " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="section:3;47:28"> Here are some examples:
      <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\keystone\keystone_init.dita" xtrc="codeblock:1;48:18">
      
# Set environment variables needed for Keystone administration
stack@hLinux:~$ source keystone.osrc 
 
# List users in the default domain
# These users are created by the installer in the MySQL back end
stack@hLinux:~$ openstack user list
+----------------------------------+---------------+
| ID                               | Name          |
+----------------------------------+---------------+
| 341027a3255a4727950fb927389c3688 | neutron       |
| 39bcb0edc9564d7c9dfa8ed18a34b3a5 | glance        |
| 3e62e6aa950343ad8117523fad19d327 | swift-monitor |
| 409015168eee476e8b98975391fdf7d1 | ceilometer    |
| 4f9ff011e160478db4f8a91cc27d8a87 | swift         |
| 6ce855e41ef74270b222a0a10a7e0106 | monasca-agent |
| 71d65560801b4d21a15f4f68c78a0c82 | glance-swift  |
| 8ec70b8f54f44f70a624db5dbd24903f | swift-demo    |
| 992d44994476476caa9c7ebbc77f1537 | nova          |
| c41e12469cbc43c3adc71807bdb8dbe8 | monasca       |
| c6976c9aa50647d987004ec52daf18a1 | logging       |
| cc81b4961c094ff29d290c096948af62 | demo          |
| d37fe7f76d0f4e63aaaa2c51f927da1e | heat          |
| d4a1a40662cc4757b0d2fc7bcfc1b60f | cinder        |
| fed1c038d9e64392890b6b44c38f5bbb | admin         |
+----------------------------------+---------------+
 
# List domains created by the installer
stack@hLinux:~$ openstack domain list
+----------------------------------+---------+---------+----------------------------------------------------------------------+
| ID                               | Name    | Enabled | Description                                                          |
+----------------------------------+---------+---------+----------------------------------------------------------------------+
| 6740dbf7465a4108a36d6476fc967dbd | heat    | True    | Owns users and projects created by heat                              |
| default                          | Default | True    | Owns users and tenants (i.e. projects) available on Identity API v2. |
+----------------------------------+---------+---------+----------------------------------------------------------------------+
 
# List roles
stack@hLinux:~$ openstack role list
+----------------------------------+-----------------+
| ID                               | Name            |
+----------------------------------+-----------------+
| 3ab2ed4754aa4379af8454937ea5efb4 | swiftoperator   |
| 3af37c0effb74d92adc9cc6cecb148f8 | ResellerAdmin   |
| 7e80806758414c398c8cebbc8044ae33 | KeystoneAdmin   |
| 90dbc08989f94d958eeda44af082cf81 | monasca-agent   |
| 9fe2ff9ee4384b1894a90878d3e92bab | _member_        |
| b398322103504546a070d607d02618ad | admin           |
| c7211fd83ecc4cce960538471e718db3 | Member          |
| cb79abf164c5431797a01bc92791b840 | monasca-user    |
| d76c511534684a9bab2a7038dfb2fd81 | heat_stack_user |
+----------------------------------+-----------------+
 
# List admin user role assignment within default domain
# This indicates that the admin user is assigned the admin role within the default domain
stack@hLinux:~$ openstack role assignment list --user admin --domain default
+----------------------------------+----------------------------------+-------+---------+---------+
| Role                             | User                             | Group | Project | Domain  |
+----------------------------------+----------------------------------+-------+---------+---------+
| b398322103504546a070d607d02618ad | fed1c038d9e64392890b6b44c38f5bbb |       |         | default |
+----------------------------------+----------------------------------+-------+---------+---------+
 
# Create a new user in default domain (MySQL)
stack@hLinux:~$ openstack user create --domain default --password-prompt --email test@example.com --description "Test User" --enable testuser
User Password:
Repeat User Password:
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Test User                        |
| domain_id   | default                          |
| email       | test@example.com                 |
| enabled     | True                             |
| id          | 8aad69acacf0457e9690abf8c557754b |
| name        | testuser                         |
+-------------+----------------------------------+
 
# Assign admin role for testuser within the default domain
# Just for demonstration purposes - do not do this in a production environment!
stack@hLinux:~$ openstack role add admin --user testuser --domain default
stack@hLinux:~$ openstack role assignment list --user testuser --domain default
+----------------------------------+----------------------------------+-------+---------+---------+
| Role                             | User                             | Group | Project | Domain  |
+----------------------------------+----------------------------------+-------+---------+---------+
| b398322103504546a070d607d02618ad | 8aad69acacf0457e9690abf8c557754b |       |         | default |
+----------------------------------+----------------------------------+-------+---------+---------+
 
</codeblock>
    </section>



  </body>
</topic>