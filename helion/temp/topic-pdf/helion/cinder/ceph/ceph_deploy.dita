<?xml version="1.0" encoding="utf-8"?><?workdir /C:\Users\sharmabi\git\documentation\helion\temp\topic-pdf\helion\cinder\ceph?><?workdir-uri file:/C:/Users/sharmabi/git/documentation/helion/temp/topic-pdf/helion/cinder/ceph/?><?path2project ..\..\?><?path2project-uri ../../?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" id="topic_jrc_5lz_ft" ditaarch:DITAArchVersion="1.2" domains="(topic hi-d)                             (topic ut-d)                             (topic indexing-d)                            (topic hazard-d)                            (topic abbrev-d)                            (topic pr-d)                             (topic sw-d)                            (topic ui-d)    " class="- topic/topic " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="topic:1;3:30">
  <title id="install-ceph" class="- topic/title " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="title:1;4:28"> Ceph Configuration </title>
  <body class="- topic/body " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="body:1;5:9">
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:1;6:8">This page describes configuration, installation, and the integration of Ceph Block Storage
      with HP Helion<tm tmtype="reg" class="- topic/tm " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="tm:1;7:38">OpenStack</tm>2.0. After the installation of Ceph you can
      perform the cinder operation as documented in this page. It also provides the procedure to
      perform cinder operation after Ceph deployment.</p>
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:2;10:8"><!--Ceph has two components, i..e., monitor and OSD. These components require different set of hardware specifications as follows:<ul id="ul_pgh_qjv_kt"><li>For monitor node, storage is not required but it is CPU sensitive. </li><li>For OSD nodes, a significant disk media, RAM and reasonable CPU are required.<p>Therefore, with this requirement we recommend the following:<ul id="ul_rl1_jkv_kt"><li>SL4540 for OSD</li><li>SL230 series of servers for monitor if monitors are not deployed on controller node which is our default configuration. If monitor is deployed on controller node, the server used for controlller node is good neough to support monitor. </li></ul></p></li></ul>--></p>
    <!--<p>Ceph has two component with differing need of hardware specifications: monitor and OSD. Monitors does not need storage but CPU sensitive. OSD needs significant disk media, RAM and reasonable CPU. Keeping this aspect in mind, we do recommend following: SL4540 for OSD DL380 or SL230 series of servers for monitor if monitors are not deployed on controller node which is our default configuration. If monirot is deployed on controller node, the server used for controlller node is good neough to support monitor </p>-->
    <section class="- topic/section " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="section:1;12:14">
      <title id="preq" class="- topic/title " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="title:2;13:24">Prerequisite</title>
      <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:3;14:10">The deployer node must be setup before deploying Ceph. For more details on the installation
        of deployer node, refer to <xref href="../../bare_installation_kvm.dita#install_kvm" class="- topic/xref " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="xref:1;16:12" type="topic"><?ditaot usertext?>installation guide.</xref></p>
    </section>
    <section class="- topic/section " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="section:2;18:14">
      <title id="install-procedure" class="- topic/title " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="title:3;19:37">Installation Procedure</title>
      <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:4;20:10">Perform the following procedures to configure, install, and the integrate the Ceph Block
        Storage with HP Helion OpenStack 2.0.</p>
    </section>
    <section class="- topic/section " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="section:3;23:14">
      <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:5;24:10">
        <ol id="ol_evc_k11_gt" class="- topic/ol " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="ol:1;25:32">
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:1;26:15">Login to the deployer node.</li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:2;27:15">Create the Ceph configuration files (<b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:1;27:55">manually</b>) at
              <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:1;28:23">~/home/stack/helion/my_cloud/definition</codeph>. The example configuration
            files are available at <xref href="configuration_files.dita#config_files" class="- topic/xref " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="xref:2;29:87" type="topic"><?ditaot usertext?>Ceph
              Configuration
            files</xref>.<!--<p>The configuration files for editing will be available at <codeph>~/helion/my_cloud/definition/data</codeph>.</p>--></li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:3;32:15">Copy the configuration files in the respective folder as shown in the screen shot
              below.<image href="../../../media/ceph/screenshot-path.png" id="image_arv_dcx_gt" placement="inline" class="- topic/image " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="image:1;34:17"/><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:6;34:20">You must copy the <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:2;34:41">yml</b> files in the appropriate folder. For example: Copy
              the <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:2;35:27">ring.yml</codeph> file in <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:3;35:61">config/swift/</codeph>.</p></li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:4;36:15">Edit the configuration files, based on your environment, to deploy Ceph. </li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:5;37:15">Edit the file <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:4;37:37">disks_osd.yml</codeph> and enter the details for the additional
            disks meant for OSD data and journal
            filesystems.<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:1;39:36">vi <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:5;39:47">disks_osd.yml</codeph></codeblock></li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:6;40:15">Editable parameters for Ceph are available in the following locations:<ul id="ul_jbn_nj5_kt" class="- topic/ul " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="ul:1;41:34">
              <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:7;42:19"><codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:6;42:27">~/helion/my_cloud/config/ceph/settings.yml</codeph><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:7;42:81">In the
                    <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:7;43:29">settings.yml</codeph> file, you can edit the following parameters:<ul id="ul_ocp_ty5_kt" class="- topic/ul " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="ul:2;44:40">
                    <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:8;45:25">fsid</li>
                    <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:9;46:25">ceph clusters</li>
                    <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:10;47:25">osd_settle_time</li>
                    <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:11;48:25">OSD_journal_size</li>
                  </ul></p></li>
              <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:12;50:19">
                <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:8;51:20"><codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:8;51:28">~/helion/my_cloud/config/ceph/user_model.yml</codeph></p>
                <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:9;52:20">The <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:9;52:32">user_model.yml</codeph> has the editable values for the different
                  pools created by HP Helion OpenStack.</p>
              </li>
            </ul></li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:13;56:15"> Commit your configuration to a <xref href="../../using_git.dita#topic_u3v_1yz_ct" class="- topic/xref " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="xref:3;57:16" type="topic"><?ditaot usertext?>local
              repository</xref>:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:2;58:44">cd ~/helion/hos/ansible
git add -A
git commit -m "&lt;commit message&gt;"</codeblock><note class="- topic/note " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="note:1;60:54">
              Enter your commit message &lt;commit message&gt;</note></li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:14;62:15">Run the configuration
            processor:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:3;63:34">cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</codeblock></li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:15;65:15">Run the following command to create a deployment
            directory.<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:4;66:34">cd ~/helion/hos/ansible
<codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:10;67:9">ansible-playbook -i hosts/localhost ready-deployment.yml</codeph></codeblock></li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:16;68:15">Modify <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:11;68:30">~/helion/hlm/ansible/hlm-deploy.yml</codeph> and uncomment the line
            containing <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:12;69:32">ceph-deploy.yml</codeph> to enable deployment of ceph.</li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:17;70:15">Run the following ansible
            playbook:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:5;71:33">cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts site.yml</codeblock></li>
        </ol>
      </p>
    </section>
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:10;76:8">Ceph Monitor service is deployed on the Controller Nodes and OSD's are deployed as separate
      nodes (Resource Nodes).</p>
    <p id="run-ceph-client-package" class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:11;78:37"><b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:3;78:40">Run Ceph Client Packages</b></p>
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:12;79:8">Ceph can be used as backend for <!--nova-compute, glance,--> cinder-volume and cinder-backup.
      The nodes running these services should have a client installed on it. Use
        <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:13;81:17">ceph-client-prepare.yml</codeph> to deploy client on respective nodes.</p>
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:13;82:8"><!--Execute the following command to install the Ceph client packages on controller nodes. --></p>
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:14;83:8">
      <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:6;84:18">cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts ceph-client-prepare.yml</codeblock>
    </p>
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:15;87:8">This will also create Ceph users and Ceph pools on the resource nodes.</p>
    <p id="configure-ceph-as-cinder-backend" class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:16;88:46"><b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:4;88:49">Configure Ceph as a Cinder backend</b></p>
    <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:17;89:8">Perform the following procedure on the Deployer node to configure Ceph as a Cinder backend:<ol class="- topic/ol " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="ol:2;89:103">
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:18;90:13">Edit <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:14;90:26">~/helion/my_cloud/config/cinder/cinder.conf.j2</codeph> to add ceph
          configuration data as shown below:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:7;91:56">enabled_backends=ceph1</codeblock></li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:19;92:13">Copy the following
            configurations:<codeblock id="ceph-cinder-conf" xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:8;93:61">[ceph1]
rbd_max_clone_depth = 5
rbd_flatten_volume_from_snapshot = False
rbd_uuid = 457eb676-33da-42ec-9a8c-9293d545c337
rbd_user = cinder
rbd_pool = volumes
rbd_ceph_conf = /etc/ceph/ceph.conf
volume_driver = cinder.volume.drivers.rbd.RBDDriver
volume_backend_name = ceph</codeblock><note class="- topic/note " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="note:2;101:45">The
              <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:5;102:18">rbd_uuid </b>is same as <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:6;102:45">secret_id </b> available at
              <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:15;103:23">~/helion/my_cloud/config/ceph/user_model.yml</codeph>.<?oxy_custom_start type="oxy_content_highlight" color="255,255,0"?></note></li>
        <?oxy_custom_end?>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:20;105:13"> Copy <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:16;105:27">ceph.client.cinder.keyring</codeph> to the controller nodes:<ol id="ol_ihn_2l5_kt" class="- topic/ol " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="ol:3;106:32">
            <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:21;107:17">Login to controller node as a root user and execute the following
                  command.<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:9;108:38">ceph auth get-or-create client.cinder | tee /etc/ceph/ceph.client.cinder.keyring</codeblock><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:18;108:133"><b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:7;108:136">OR</b></p><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:19;108:149">You
                can copy the keyring from the deployer
                node<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:10;110:32">scp /etc/ceph/ceph.client.cinder.keyring</codeblock> to
                  <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:17;111:27">/etc/ceph</codeph> folder on all the controller nodes.</p></li>
          </ol></li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:22;113:13">To enable cinder backup to Ceph, modify <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:18;113:61">cinder.conf.j2</codeph> at
            <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:19;114:21">~/helion/my_cloud/config/cinder</codeph> in the [<b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:8;114:73">Default</b>] section with
          the following values:
            <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:11;116:24"># Ceph backup
backup_driver = cinder.backup.drivers.ceph
backup_ceph_conf = /etc/ceph/ceph.conf
backup_ceph_user = cinder-backup
backup_ceph_chunk_size = 134217728
backup_ceph_pool = backups
backup_ceph_stripe_unit = 0
backup_ceph_stripe_count = 0
restore_discard_excess_bytes = true</codeblock><note class="- topic/note " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="note:3;124:54">You
            can add a comment (<b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:9;125:35"># Ceph backup </b>) as shown above so that the ceph backup content
            can be easily identified in the<codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:20;126:52"> cinder.conf.j2</codeph> file.</note></li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:23;127:13"> Copy <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:21;127:27">client.cinder-backup.keyring</codeph> to the controller nodes:<ol id="ol_xx5_51x_gt" class="- topic/ol " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="ol:4;128:32">
            <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:24;129:17">Login to controller node as a root user and execute the following
                  command.<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:12;130:38">ceph auth get-or-create client.cinder-backup | tee /etc/ceph/ceph.client.cinder-backup.keyring</codeblock><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:20;130:147"><b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:10;130:150">OR</b></p><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:21;130:163">You
                can copy the keyring from the deployer
                node<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:13;132:32">scp /etc/ceph/ceph.client.cinder-backup.keyring</codeblock> to
                  <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:22;133:27">/etc/ceph</codeph> folder on all the controller nodes.</p></li>
          </ol></li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:25;135:13">Commit your configuration to the local repository to configure cinder on the deployer node.<p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:22;135:107">
            <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:14;136:24">cd ~/helion/hos/ansible
git add -A
git commit -m "&lt;commit message&gt;"</codeblock>
          </p><note class="- topic/note " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="note:4;139:21"> Enter your commit message &lt;commit message&gt;</note></li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:26;140:13">Run the following command to create a deployment
          directory.<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:15;141:32">cd ~/helion/hos/ansible
<codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:23;142:9">ansible-playbook -i hosts/localhost ready-deployment.yml</codeph></codeblock></li>
        <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:27;143:13">Run the following ansible
            playbook:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:16;144:33">cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts cinder-reconfigure.yml</codeblock><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:23;145:75">Once
            cinder is configured, launch the Horizon dashboard to create a cinder volume type to
            verify the ceph configuration as backend . Once you are able to create the volume, you
            can delete the created volume. For more information on verify the ceph configuration,
            refer to <xref href="../verify_backend_configuration.dita#topic_q5q_trz_jt" class="- topic/xref " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="xref:4;149:89" type="topic"><?ditaot usertext?>Verify
              Backend Configuration</xref>.</p></li>
      </ol></p>
    <section class="- topic/section " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="section:4;152:14">
      <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:24;153:10"><b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:11;153:13">Attach Ceph Volume to Instance</b></p>
      <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:25;154:10">Perform the following steps to attach Ceph volume to an instance: <ol id="ol_vx4_4gv_kt" class="- topic/ol " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="ol:5;154:99">
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:28;155:15">On the deployer node, edit <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:24;155:50">kvm-hypervisor.conf.j2</codeph> at
              <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:25;156:23">~/helion/my_cloud/config/nova/kvm-hypervisor.conf.j2</codeph> to add the
            following for RBD volume
              attach:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:17;158:33">[libvirt]
rbd_user = cinder
rbd_secret_uuid = 457eb676-33da-42ec-9a8c-9293d545c337</codeblock><note class="- topic/note " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="note:5;160:73">The
                <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:12;161:20">rbd_secret_uuid </b>is same as <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:13;161:54">secret_id </b> available at
                <codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:26;162:25">~/helion/my_cloud/config/ceph/user_model.yml</codeph>.</note></li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:29;163:15">Commit your configuration to the local repository to configure cinder on the deployer node.<p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:26;163:109">
              <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:18;164:26">cd ~/helion/hos/ansible
git add -A
git commit -m "&lt;commit message&gt;"</codeblock>
            </p><note class="- topic/note " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="note:6;167:23"> Enter your commit message &lt;commit message&gt;</note></li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:30;168:15">Run the following command to create a deployment
            directory.<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:19;169:34">cd ~/helion/hos/ansible
<codeph class="+ topic/ph pr-d/codeph " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeph:27;170:9">ansible-playbook -i hosts/localhost ready-deployment.yml</codeph></codeblock></li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:31;171:15">Run the following ansible
            playbook:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:20;172:33">cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts run nova-reconfigure.yml</codeblock></li>
        </ol></p>
    </section>
    <section class="- topic/section " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="section:5;176:14">
      <title id="ceph-operation" class="- topic/title " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="title:4;177:34">
        <b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:14;178:12">Ceph Operations</b></title>
      <p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:27;179:10">After the successful deployment of Ceph, you can perform the following Ceph operations:<ul class="- topic/ul " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="ul:3;179:101">
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:32;180:15">Check the status of Ceph OSD and Monitor Services</li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:33;181:15">Start OSD Nodes and Monitor Services</li>
          <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:34;182:15">Stop OSD Nodes and Monitor Services<p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:28;182:53"><b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:15;182:56">Check the status of Ceph OSD and Monitor
                Services</b>
            </p><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:29;184:20">Perform the following steps to check the stays of Ceph OSD Nodes and Monitor Services:<ol class="- topic/ol " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="ol:6;184:110">
                <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:35;185:21">Login to Deployer Node.</li>
                <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:36;186:21">Change to the following
                  directory:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:21;187:40">~/scratch/ansible/next/hos/ansible</codeblock></li>
                <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:37;188:21">Run the ansible
                  playbook:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:22;189:39">ansible-playbook -i hosts/verb_hosts ceph-status.yml</codeblock></li>
              </ol></p><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:30;190:27"><b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:16;190:30">Start OSD and Monitor Services</b></p><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:31;190:71">Perform the following steps to
              start OSD Nodes and Monitor Services:<ol class="- topic/ol " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="ol:7;191:56">
                <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:38;192:21">Login to Deployer Node.</li>
                <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:39;193:21">Change to the following
                  directory:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:23;194:40">cd ~/scratch/ansible/next/hos/ansible</codeblock></li>
                <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:40;195:21">Run the ansible
                  playbook:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:24;196:39">ansible-playbook -i hosts/verb_hosts ceph-start.yml</codeblock></li>
              </ol></p><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:32;197:27"><b class="+ topic/ph hi-d/b " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="b:17;197:30">Stop OSD Nodes and Monitor Services</b></p><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:33;197:76">Perform the following
              steps to stop OSD Nodes and Monitor Services:</p><p class="- topic/p " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="p:34;198:67">
              <ol class="- topic/ol " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="ol:8;199:19">
                <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:41;200:21">Login to Deployer Node.</li>
                <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:42;201:21">Change to the following
                  directory:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:25;202:40">cd ~/scratch/ansible/next/hos/ansible</codeblock></li>
                <li class="- topic/li " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="li:43;203:21">Run the ansible
                  playbook:<codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="C:\Users\sharmabi\git\documentation\helion\cinder\ceph\ceph_deploy.dita" xtrc="codeblock:26;204:39">ansible-playbook -i hosts/verb_hosts ceph-stop.yml</codeblock></li>
              </ol>
            </p>
          </li>
        </ul></p>
    </section>
  </body>
</topic>