<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="password_encryption">
  <title>HP Helion <tm tmtype="reg">OpenStack</tm> 2.0: Encryption of Passwords and Sensitive Data</title>
  <body>
    <p>
      In HP Helion OpenStack 2.0 senstive connection data is encrypted.
      The passwords that are encrypted:
      <ul>
      <li>Inter-service passwords generated by the configuration processor (Keystone, MySQL, RabbitMQ and Vertica passwords)
      </li><li>Secret keys generated by the configuration processor (MySQL cluster-id, erlang cookie for
          RabbitMQ, Horizon secret key, Keystone admin token) </li><li>User-supplied passwords (iLO passwords, Cinder back-end passwords) </li></ul>
    </p>
      <p>
        
        Ohter protected data:
        <ul>
          <li>The ssh private key used by Ansible to connect to client nodes from the Deployer is protected with a passphrase.
      
          </li>   
            <li>The Swift swift-hash prefix and suffix values are
          encrypted<!--, or will be when the relevant patches land -->. </li>   
          <li>All of the Ansible variables generated by the configuration processor are encrypted
          and held in Ansible Vault. </li></ul>
      
           
      
    </p>
    <p>If you need to change a password, then the following applies:</p>
      
      <ul>
        <li> Inter-service passwords: These cannot be changed at this time.</li>   
        <li>Secret keys:  again cannot be changed
        </li>   
        <li>User-supplied passwords:  can be changed
        </li>   
      </ul>
      
      <p>However, if a user wants to change the encryption keys then that can be done for all 
        categories of password and secret-keys listed below, and the processes are documented.</p>
      
      <p>The ssh private key passphrase needs to be entered once before any Ansible plays are run against the cloud; 
        the process is documented.  
        </p><p>The configuration processor encryption key will be prompted for when the relevant Ansible play is run. 
          Once the configuration processor output has been encrypted, all subsequent ansible plays need to have --ask-ansible-pass added to the
          command line to ensure that the encryption key which is needed by Ansible is prompted for.  </p>
          <p>Finally, if user-supplied passwords have been encrypted (this process uses the OpenSSL library)
            then the environment variable HOS_USER_PASSWORD_ENCRYPT_KEY must contain the key used to encrypt those passwords.</p>
      
     <p> The generated passwords are stored in Ansible inputs generated by the configuration processor.</p>
    
    <!-- added from the install page
       <section id="protection"><title>Protecting Sensitive Data on the Deployer</title>
      <p>There are a number of mechanisms that can be used to protect sensitive data such as
        passwords, some Ansible inputs, and the SSH key used by Ansible on the deployer. See the
        installation section below for details. Please remember the need to guard against exposure
        of your environment variables, which may happen through observation over the shoulder.</p>
      <p>There are instructions included in the sections below that show how to encrypt your data
        using the <codeph>hosencrypt.py</codeph> script. You may want to change the encryption keys
        used to protect your sensitive data in the future and this shows you how:</p>
      <ul>
        <li><b>SSH keys</b> - Run the command below to change the passphrase used to protect the
          key: <codeblock>ssh-keygen -f id_rsa -p</codeblock></li>
        <li><b>Configuration Processor Key</b> - If you wish to change an encryption password that
          you have already used when running the Configuration Processor then enter the existing
          password at the first prompt and the new password at the second prompt when running the
          Configuration Processor playbook. See <xref href="#install_kvm/encrypt">Encrypting
            Password during Configuration Processor</xref> for more details.</li>
        <li><b>iLO passwords, VSA password if encrypted with <codeph>hosencrypt.py</codeph></b> -
          Rerun the utility specifying a new encryption key when prompted. You will need to enter
          the plaintext passwords at the password prompt.</li>
      </ul>
    </section>
    -->
    
  </body>
</topic>
