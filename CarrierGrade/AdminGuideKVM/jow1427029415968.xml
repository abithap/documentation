<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River Concept//EN" "concept-wr.dtd">
<concept-wr id="jow1427029415968" xml:lang="en-us">
<!-- Modification History

 -->
 <title id="1">Network Interface Provisioning Using the CLI</title>
 <shortdesc id="2">You can use CLI commands to create and attach network
  interfaces.</shortdesc>
 <prolog>
  <author id="3"/>
 </prolog>
 <conbody>
  <p id="4">For more information about interface provisioning, or help using the web
   administration interface, see <xref href="jow1426948577755.xml" id="63"/>.</p>
  <p id="64">To list attached interfaces, use the <nameliteral id="65">system host-if-list</nameliteral>
   command.</p>
  <codeblock id="48"><systemoutput id="58">~(keystone_admin)$ </systemoutput><userinput id="44">system host-if-list controller-0</userinput>
<systemoutput id="59">...+--------+------...+----------+---------+-----------+------------+-------------+...
...| name   | netwo...| type     | vlan id | ports     | uses i/f   | used by i/f |...
...+--------+------...+----------+---------+-----------+------------+-------------+...
...| infra0 | infra...| vlan     | 22      | []        | [u'mgmt0'] | []          |...
...| oam0   | oam  ...| ethernet | None    | [u'eth0'] | []         | []          |...
...| mgmt0  | mgmt ...| ethernet | None    | [u'eth1'] | []         | [u'infra0'] |...
...+--------+------...+----------+---------+-----------+------------+-------------+...</systemoutput>
</codeblock>
  <p id="38"> To see all available interfaces, add the <option id="55">-a</option>
   flag.</p>
  <codeblock id="41"><systemoutput id="66">~(keystone_admin)$ </systemoutput><userinput id="45">system host-if-list -a controller-0</userinput>
<systemoutput id="62">...+--------+------...+----------+---------+-----------+------------+-------------+...
...| name   | netwo...| type     | vlan id | ports     | uses i/f   | used by i/f |...
...+--------+------...+----------+---------+-----------+------------+-------------+...
...| eth3   | None ...| ethernet | None    | [u'eth3'] | []         | []          |...
...| infra0 | infra...| vlan     | 22      | []        | [u'mgmt0'] | []          |...
...| eth2   | None ...| ethernet | None    | [u'eth2'] | []         | []          |...
...| oam0   | oam  ...| ethernet | None    | [u'eth0'] | []         | []          |...
...| mgmt0  | mgmt ...| ethernet | None    | [u'eth1'] | []         | [u'infra0'] |...
...+--------+------...+----------+---------+-----------+------------+-------------+...</systemoutput></codeblock>
  <section id="section_N1005F_N1001E_N10001" id="71">
   <title id="72">Ethernet Interfaces</title>
   <p id="73">Ethernet interfaces are created automatically. To attach one to a network, use
    a command of the following form:</p>
   <codeblock id="74"><systemoutput id="67">~(keystone_admin)$ </systemoutput><userinput id="75">system host-if-modify -n <varname id="76">ifname</varname> -m <varname id="77">mtu</varname> \
-nt <varname id="78">networktype</varname> <varname id="79">hostname</varname> <varname id="80">ethname</varname> [-p <varname id="249">providernetworklist</varname>]</userinput></codeblock>
   <p id="81">where</p>
   <parml>
    <plentry id="82">
     <pt id="83">ifname</pt>
     <pd id="84">
      <p id="85">is a name for the interface</p>
     </pd>
    </plentry>
    <plentry id="229">
     <pt id="231">mtu</pt>
     <pd id="233">
      <p id="235">is the MTU for the interface</p>
     </pd>
    </plentry>
    <plentry id="237">
     <pt id="239">networktype</pt>
     <pd id="241">
      <p id="93">is the type of network to attach to</p>
     </pd>
    </plentry>
    <plentry id="94">
     <pt id="95">hostname</pt>
     <pd id="96">
      <p id="97">is the name or UUID of the host</p>
     </pd>
    </plentry>
    <plentry id="98">
     <pt id="99">ethname</pt>
     <pd id="100">
      <p id="101">is the name or UUID of the Ethernet interface to use</p>
     </pd>
    </plentry>
    <plentry id="258">
     <pt id="260">providernetworklist</pt>
     <pd id="262">
      <p id="264">is a list of provider networks, delimited by quotes and separated by
       spaces; for example, <userinput id="266">"provider-net-a provider-net-b"</userinput>.
       To specify a single provider network, omit the quotes. This parameter is required only if the
        <varname id="268">networktype</varname> is set to <option id="269">data</option>.</p>
     </pd>
    </plentry>
   </parml>
   <p id="102">For example, to attach an interface named <nameliteral id="103">infra0</nameliteral> to the
    infrastructure network, using Ethernet interface <nameliteral id="104">eth0</nameliteral> on
     <nameliteral id="105">compute-0</nameliteral>:</p>
   <codeblock id="106"><systemoutput id="68">~(keystone_admin)$ </systemoutput><userinput id="107">system host-if-modify -n infra0 \
-nt infra compute0 eth0</userinput></codeblock>
  </section>
  <section id="section_N100FB_N1001E_N10001" id="108">
   <title id="109">Aggregated Ethernet Interfaces</title>
   <p id="110">To create an aggregated Ethernet interface and attach it to a network, use a command of the
    following form:</p>
   <codeblock id="111"><systemoutput id="69">~(keystone_admin)$ </systemoutput><userinput id="112">system host-if-add <varname id="113">ifname</varname> -m <varname id="114">mtu</varname> \
-a <varname id="115">aemode</varname> -x <varname id="116">policy</varname> <varname id="117">hostname</varname> \
 ae "<varname id="118">providernetworklist</varname>" <varname id="119">ethname1</varname> <varname id="120">ethname2</varname></userinput> </codeblock>
   <p id="121">where</p>
   <parml>
    <plentry id="122">
     <pt id="123">ifname</pt>
     <pd id="124">
      <p id="125">is a name for the interface</p>
     </pd>
    </plentry>
    <plentry id="126">
     <pt id="127">mtu</pt>
     <pd id="128">
      <p id="129">is the MTU for the interface</p>
     </pd>
    </plentry>
    <plentry id="130">
     <pt id="131">aemode</pt>
     <pd id="132">
      <p id="133">is the link aggregation mode</p>
     </pd>
    </plentry>
    <plentry id="134">
     <pt id="135">policy</pt>
     <pd id="136">
      <p id="137">is the balanced tx distribution hash policy</p>
     </pd>
    </plentry>
    <plentry id="138">
     <pt id="139">hostname</pt>
     <pd id="140">
      <p id="141">is the name or UUID of the host</p>
     </pd>
    </plentry>
    <plentry id="142">
     <pt id="143">providernetworklist</pt>
     <pd id="144">
      <p id="145">is a list of provider networks to attach to, separated by spaces</p>
      <note id="note_N101E4_N101DB_N101D2_N1016B_N10123_N1001E_N10001" id="246">
       <p id="247">For networks other than data networks, the value <nameliteral id="248">none</nameliteral> is
        required.</p>
      </note>
     </pd>
    </plentry>
    <plentry id="146">
     <pt id="147">ethname1, ethname2</pt>
     <pd id="148">
      <p id="149">are the names or UUIDs of the member interfaces</p>
     </pd>
    </plentry>
   </parml>
   <p id="150">For example, to attach an aggregated Ethernet interface named <nameliteral id="151">ae0</nameliteral>
    to provider networks <nameliteral id="152">provider-net-a</nameliteral> and
     <nameliteral id="153">provider-net-b</nameliteral>, using member interfaces
     <nameliteral id="154">eth2</nameliteral> and <nameliteral id="155">eth3</nameliteral> on
     <nameliteral id="156">compute-0</nameliteral>:</p>
   <codeblock id="157"><systemoutput id="70">~(keystone_admin)$ </systemoutput><userinput id="158">system host-if-add ae0 -a balanced \
-x layer2 compute-0 ae "provider-net-a provider-net-b" eth2 eth3</userinput></codeblock>
   <p id="159">For more about link aggregation modes and policies, see <xref href="jow1404333496893.xml" id="160"/>.</p>
  </section>
  <section id="section_N101D8_N1001E_N10001" id="161">
   <title id="162">VLAN Interfaces</title>
   <p id="163">To create a VLAN interface and attach it to a network, use a command of the following
    form:</p>
   <codeblock id="164"><systemoutput id="166">~(keystone_admin)$ </systemoutput><userinput id="168">system host-if-add <varname id="170">ifname</varname> -V <varname id="171">vlan_id</varname> \
-nt <varname id="172">networktype</varname> <varname id="173">hostname</varname> <varname id="175">ethname</varname> [-p <varname id="257">providernetworklist</varname>]</userinput>
</codeblock>
   <p id="176">where</p>
   <parml>
    <plentry id="177">
     <pt id="178">ifname</pt>
     <pd id="179">
      <p id="180">is a name for the interface</p>
     </pd>
    </plentry>
    <plentry id="181">
     <pt id="182">vlan_id</pt>
     <pd id="183">
      <p id="184">is the VLAN identifier for the network</p>
     </pd>
    </plentry>
    <plentry id="185">
     <pt id="186">hostname</pt>
     <pd id="187">
      <p id="188">is the name or UUID of the host</p>
     </pd>
    </plentry>
    <plentry id="189">
     <pt id="190">networktype</pt>
     <pd id="191">
      <p id="192">is the type of network to attach to</p>
     </pd>
    </plentry>
    <plentry id="193">
     <pt id="194">ethname</pt>
     <pd id="195">
      <p id="196">is the name or UUID of the Ethernet interface to use</p>
     </pd>
    </plentry>
    <plentry id="259">
     <pt id="261">providernetworklist</pt>
     <pd id="263">
      <p id="265">is a list of provider networks, delimited by quotes and separated by
       spaces; for example, <userinput id="267">"provider-net-a provider-net-b"</userinput>.
       To specify a single provider network, omit the quotes. This parameter is required only if the
        <varname id="270">networktype</varname> is set to <option id="271">data</option>.</p>
     </pd>
    </plentry>
   </parml>
   <p id="197">For example, to attach a VLAN interface named <nameliteral id="198">infra0</nameliteral> with VLAN ID
     <nameliteral id="199">22</nameliteral> to the infrastructure network, using Ethernet interface
     <nameliteral id="200">eth1</nameliteral> on <nameliteral id="201">storage-0</nameliteral>:</p>
   <codeblock id="165"><systemoutput id="167">~(keystone_admin)$ </systemoutput><userinput id="169">system host-if-add infra0 -V 22 -nt infra storage-0 vlan eth1</userinput>
<systemoutput id="57">+------------------+--------------------------------------+
| Property         | Value                                |
+------------------+--------------------------------------+
| ifname           | infra0                               |
| networktype      | infra                                |
| iftype           | vlan                                 |
| ports            | []                                   |
| providernetworks | None                                 |
| imac             | 08:00:27:f2:0d:68                    |
| imtu             | 1500                                 |
| aemode           | None                                 |
| schedpolicy      | None                                 |
| txhashpolicy     | None                                 |
| uuid             | 8ca9854e-a18e-4a3c-8afe-f050da702fdf |
| ihost_uuid       | 3d207384-7d30-4bc0-affe-d68ab6a00a5b |
| vlan_id          | 22                                   |
| uses             | [u'eth1']                            |
| used_by          | []                                   |
| created_at       | 2015-02-04T16:23:28.917084+00:00     |
| updated_at       | None                                 |
+------------------+--------------------------------------+
</systemoutput></codeblock>
   <p id="202">where</p>
   <parml>
    <plentry id="203">
     <pt id="204">ifname</pt>
     <pd id="205">
      <p id="206">is a name for the interface</p>
     </pd>
    </plentry>
    <plentry id="207">
     <pt id="208">mtu</pt>
     <pd id="209">
      <p id="210">is the MTU for the interface</p>
     </pd>
    </plentry>
    <plentry id="211">
     <pt id="212">aemode</pt>
     <pd id="213">
      <p id="214">is the link aggregation mode</p>
     </pd>
    </plentry>
    <plentry id="215">
     <pt id="216">policy</pt>
     <pd id="217">
      <p id="218">is the balanced tx distribution hash policy</p>
     </pd>
    </plentry>
    <plentry id="219">
     <pt id="220">hostname</pt>
     <pd id="221">
      <p id="222">is the name or UUID of the host</p>
     </pd>
    </plentry>
    <plentry id="223">
     <pt id="224">ethname1, ethname2</pt>
     <pd id="225">
      <p id="226">are the names or UUIDs of the member interfaces</p>
     </pd>
    </plentry>
   </parml>
   <p id="227">For more about VLAN interfaces, see the <cite id="228">HP Helion OpenStack Carrier Grade Administration Guide: Shared
     Ethernet Interfaces</cite>.</p>
  </section>
  <section id="section_N10391_N1001E_N10001" id="243">
   <title id="244">Combined Data and Management or Infrastructure Interfaces</title>
   <p id="245">You can add a data interface to a management or infrastructure interface using a command of
    the following form:</p>
   <codeblock id="230"><systemoutput id="232">~(keystone_admin)$ </systemoutput><userinput id="234">system host-if-modify    nt    mgmt,data       p group0-data0 compute-0 mgmt0</userinput></codeblock>
   <p id="236">This example adds a data network to the <nameliteral id="238">mgmt0</nameliteral> interface on <nameliteral id="240">compute-0</nameliteral>, for the
    provider network <nameliteral id="242">group0-data0</nameliteral>.</p>
  </section>
 </conbody>
</concept-wr>