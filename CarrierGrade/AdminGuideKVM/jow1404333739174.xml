<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River Concept//EN" "concept-wr.dtd">
<concept-wr domains="(topic concept concept-wr)                            (topic hi-d)                            (topic indexing-d)                            (topic pr-d)                            (topic sw-d)                            (topic ui-d)                            (topic wr-sw-d)                            (topic xml-d)   " id="jow1404333739174" xml:lang="en-us" xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/">
    <title id="1">Tenant Networks</title>
    <shortdesc id="2">Tenant networks are logical networking entities visible to tenant users, and around
  which working network topologies are built.</shortdesc>
    <prolog>
        <author id="3">Pedro Sanchez</author>
    </prolog>
    <conbody>
        <p id="26">Tenant networks need support from the physical layers to work as
            intended. This means that the access L2 switches, providers' networks, and data
            interface definitions on the compute nodes, must all be properly configured. In
            particular, when using provider networks of the VLAN or VXLAN type, getting the proper
            configuration in place requires additional planning. </p>
        <p id="27">For provider networks of the VLAN type, consider the following
            guidelines:</p>
        <ul id="ul_hqm_n2s_4n">
            <li id="29">
                <p id="31">All ports on the access L2 switches must be statically configured to support all the VLANs
     defined on the provider networks they provide access to. The dynamic nature of the cloud might
     force the set of VLANs in use by a particular L2 switch to change at any moment.</p>
            </li>
            <li id="33">
                <p id="35">The set of VLANs used by each compute node is not fixed; it
                    changes over time. The current VLAN set in use is determined by the
                    configuration details of the tenant networks, and the scheduling on the compute
                    nodes of the virtual machines that use them. This information is provided to the
                    Neutron's AVS plugin, which then uses it to configure the AVS as required.</p>
                <p id="20">When a tenant creates a new network, the Neutron segmentation
                    allocation strategy is to look first for an available segmentation identifier
                    owned by the tenant. If none is available, the search continues over the
                    available shared segmentation identifiers. The allocation process returns an
                    error if no segmentation identifiers are available.</p>
                <p id="25">The VLAN ID assigned to a tenant network is fixed for as long as the tenant
                    network is defined in the system. If for some reason the VLAN ID has to change,
                    the tenant network must be deleted and recreated again.</p>
            </li>
            <li id="37">
                <p id="39">Configuring a tenant network to have access to external networks
                    (not just providing local networking) requires the following elements:</p>
                <ul id="ul_vmr_tfs_4n">
                    <li id="41">
                        <p id="43">A physical router, and the provider network's access L2 switch, must be part of the same
       Layer-2 network. Because this Layer 2 network uses a unique VLAN ID, this means also that the
       router's port used in the connection must be statically configured to support the
       corresponding VLAN ID.</p>
                    </li>
                    <li id="45">
                        <p id="17">The router must be configured to be part of the same IP subnet that the tenant network is
       intending to use.</p>
                    </li>
                    <li id="18">
                        <p id="19">When configuring the IP subnet, the tenant must use the router's port IP address as its
       external gateway.</p>
                    </li>
                    <li id="21">
                        <p id="22">The tenant network must have the <nameliteral id="23">external</nameliteral> flag set. Only the
                                <nameliteral id="24">admin</nameliteral> user can set this
                            flag when the tenant network is created.</p>
                    </li>
                </ul>
            </li>
        </ul>
        <p id="28">For provider networks of the VXLAN type, consider the following
            guidelines:</p>
        <ul id="ul_gwl_5fh_hr">
            <li id="4">
                <p id="30">Layer 3 routers used to interconnect compute nodes must be
                    multicast-enabled, as required by the VXLAN protocol.</p>
            </li>
            <li id="32">
                <p id="34">To minimize flooding of multicast packets, IGMP and MLD snooping
                    is recommended on all Layer 2 switches. The AVS switch supports IGMP V1, V2 and
                    V3, and MLD V1 and V2.</p>
            </li>
            <li id="36">
                <p id="38">To support IGMP and MDL snooping, Layer 3 routers must be
                    configured for IGMP and MDL querying.</p>
            </li>
            <li id="40">
                <p id="11">To accommodate VXLAN encapsulation, the MTU values for Layer 2
                    switches and compute node data interfaces must allow for additional headers. For
                    more information, see <xref href="jow1404333732592.xml" id="12"/>.</p>
            </li>
            <li id="13">
                <p id="42">To participate in a VXLAN network, the data interfaces on the
                    compute nodes must be configured with IP addresses, and with route table entries
                    for the destination subnets or the local gateway. For more information, see
                        <xref href="jow1425584170078.xml" id="44"/>, and <xref href="jow1425584215069.xml" id="46"/>.</p>
            </li>
        </ul>
    </conbody>
</concept-wr>