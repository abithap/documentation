<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River Concept//EN" "concept-wr.dtd">
<concept-wr domains="(topic concept concept-wr)                            (topic hi-d)                            (topic indexing-d)                            (topic pr-d)                            (topic sw-d)                            (topic ui-d)                            (topic wr-sw-d)                            (topic xml-d)   " id="psa1410446455735" xml:lang="en-us" xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/">
 <!-- Modification History

 -->
 <title id="1">Managing Software Patches</title>
 <shortdesc id="2">Patches to the system software become available as needed to address
  issues associated with a current HP Helion OpenStack Carrier Grade software release. They must be uploaded to the
  active controller and applied to all required hosts in the cluster.</shortdesc>
 <prolog>
  <author id="3">Pedro Sanchez</author>
 </prolog>
 <conbody>
  <p id="16">The patching system is implemented using the following components:</p>
  <dl>
   <dlentry id="17">
    <dt id="18">Patch Controller</dt>
    <dd id="19">
     <p id="20">This is a daemon running on the active controller. The daemon queries the
      patch agents to collect information about the state of patches on every host in the cluster.
      It also communicates with the patch agents to command patch operations to take place.</p>
    </dd>
   </dlentry>
   <dlentry id="21">
    <dt id="22">Patch Agent</dt>
    <dd id="23">
     <p id="24">These are daemons running on the cluster hosts, one agent per host. Each
      patch agent maintains up-to-date information about the status of patches on the host, and
      responds to queries and commands from the patch controller.</p>
    </dd>
   </dlentry>
   <dlentry id="25">
    <dt id="26">Patching Commands</dt>
    <dd id="28">
     <p id="29">The <cmdname id="38">wrs-patch</cmdname> command is available on the
      active controller. It provides the user interface to process the patches, including querying
      the state of a patch, listing affected hosts, and applying, installing, and removing
      patches.</p>
     <p id="39">The <cmdname id="40">system host-patch-reboot</cmdname> command
      provides a convenient way to lock a host, install all pending patches, reboot, and bring the
      host back to the unlock-available state.</p>
    </dd>
   </dlentry>
   <dlentry id="30">
    <dt id="31">Patch Storage Area</dt>
    <dd id="32">
     <p id="33">A central storage area maintained by the patch controller. Patches are
      initially uploaded to the patch storage area and remain there until they are deleted.</p>
    </dd>
   </dlentry>
   <dlentry id="34">
    <dt id="35">Software Updates Repository</dt>
    <dd id="36">
     <p id="37">A central repository of software updates associated with patches applied to
      the system. This repository is used by all hosts in the cluster to identify the software
      updates and rollbacks required on each host.</p>
    </dd>
   </dlentry>
  </dl>
  <p id="5">The overall flow for installing a patch from the command line interface on a
   working HP Helion OpenStack Carrier Grade cluster is the following:</p>
  <ol id="ol_vgf_yzz_jp">
   <li id="6">
    <p id="7">Download the patch to a workstation that can reach the active controller
     through the OAM network. </p>
   </li>
   <li id="8">
    <p id="9">Copy the patch to the active controller using the cluster's OAM floating IP
     address as the destination point. You can use a command such as <cmdname id="10">scp</cmdname> to copy the patch. The patching workflows presented in this document assume
     that this step is complete already, that is, they assume that the patch is already available
     from the file system of the active controller.</p>
   </li>
   <li id="12">
    <p id="13">Upload the new patch to the patching storage area. This step makes the new
     patch available within the patching system, but does not install it to the cluster yet. For all
     purposes, the patch is dormant.</p>
   </li>
   <li id="14">
    <p id="15">Apply the patch, and install it on each of the affected hosts in the
     cluster.</p>
   </li>
  </ol>
  <p id="47">Patching the system can be done using the web administration interface or the
   command line interface on the active controller. When using the web administration interface you
   upload the patch directly from your workstation using a file browser window provided by the patch
   upload facility.</p>
  <p id="48">A special case occurs during the initial provisioning of a cluster, when you
   want to patch <nameliteral id="42">controller-0</nameliteral> before the system software
   is configured. This can only be done from the command line interface. See <xref href="psa1414084582159.xml" id="43"/> for details.</p>
  <p id="45">The following sections introduce the core patching concepts using the command
   line interface. It is therefore advised that you read this content before reading the section
    <xref href="psa1420733173602.xml" id="46"/>, which assumes you are already familiar with
   the patching workflow.</p>
 </conbody>
</concept-wr>