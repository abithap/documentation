<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="jow1426625051841" xml:lang="en-us">
<!-- Modification History
        
-->
    <title id="302">Pinning a vCPU to a Shared Physical CPU</title>
    <shortdesc id="303">You can pin a vCPU to a shared physical CPU by using a flavor with the required extra
        specification.</shortdesc>
    <prolog>
        <author id="304">Jim Owens</author>
    </prolog>
    <taskbody>
        <context id="context_N1001F_N1001C_N10001" id="305">
            <p id="306">You can set up a shared physical CPU on the host to run low-load or
                non-real-time tasks for multiple VMs, freeing other cores on the host for dedicated
                high-load tasks. You can then use an extra spec to pin a specified vCPU to the
                shared physical CPU.</p>
        </context>
        <prereq id="prereq_N1002D_N1001C_N10001" id="307">
            <p id="308">To use this extra spec, you must define a shared physical CPU on at least
                one host. For more information, see <xref href="jow1426618822854.xml" id="295"/>. To support migration, shared physical CPUs on multiple hosts are
                recommended.</p>
            <p id="296">You must also set the <nameliteral id="297">CPU
                    Policy</nameliteral> extra specification for the flavor to <nameliteral id="298">Dedicated</nameliteral>. This enables the high-load vCPUs for
                the instance to be pinned.</p>
        </prereq>
        <context id="context_N1004A_N1001C_N10001" id="309">
            <p id="310">To add the required extra specification to a flavor using the web
                administration interface, use the <uicontrol id="311">Shared VCPU
                    ID</uicontrol> selection in the <uicontrol id="312">Create Flavor Extra
                    Spec</uicontrol> drop-down menu. To access this menu, see <xref href="jow1429538642910.xml" id="313"/>.</p>
            <p id="299">To set the Shared VCPU ID from the CLI, use a command of the
                following form:</p>
            <codeblock id="282"><systemoutput id="284">~(keystone_admin)$ </systemoutput><userinput id="286">nova flavor-key <varname id="288">flavor_name</varname> set hw:wrs:shared_vcpu=<varname id="290">vcpu_id</varname></userinput></codeblock>
            <p id="300">where <nameliteral id="301">vcpu_id</nameliteral> is an
                integer that identifies the vcpu (starting from 0).</p>
        </context>
    </taskbody>
</task-wr>