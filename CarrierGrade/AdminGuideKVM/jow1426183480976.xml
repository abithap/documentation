<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="jow1426183480976" xml:lang="en-us">
<!-- Modification History
        
-->
    <title id="1">Configuring a Compute Host to Provide Local  Storage</title>
    <shortdesc id="2">You can configure a compute host to provide local storage for use by
        VMs. </shortdesc>
    <prolog>
        <author id="3">Jim Owens</author>
    </prolog>
    <taskbody>
        <context id="context_N10022_N1001F_N10001" id="87">
            <p id="101">Local storage can be used to provide improved disk access
                performance for VMs instantiated on the host.</p>
            <note conref="jow1426942555025.xml#jow1426942555025/note_local_storage_ephemeral" id="note_N1002C_N10022_N1001F_N10001" id="102"/>
            <p id="88">To provide local storage on a compute host, add a local volume group
                called <nameliteral id="90">nova-local</nameliteral> to the host. This
                automatically includes the host in the <nameliteral id="91">local_storage_hosts</nameliteral> host aggregate. The Nova scheduler draws from
                this host aggregate to instantiate VMs that require local storage. </p>
            <p id="92">To populate the <nameliteral id="93">nova-local</nameliteral>
                group with storage resources, you must also add physical volumes created on local
                disks.</p>
            <p id="95">As an alternative to the web administration interface, you can use
                the CLI to configure the host for local storage. For more information, see <xref href="jow1426181291481.xml" id="96"/> and <xref href="jow1426182435441.xml" id="97"/>.</p>
        </context>
        <steps>
            <step conref="jow1426453628262.xml#jow1426453628262/lock_host" id="step_N1002A_N10027_N1001F_N10001" id="76">
                <cmd id="77"/>
            </step>
            <step conref="jow1426453628262.xml#jow1426453628262/open_details_locked_host" id="step_N10033_N10027_N1001F_N10001" id="78">
                <cmd id="79"/>
            </step>
            <step id="step_N1002B_N10028_N1001C_N10001" id="6">
                <cmd id="7">Select the <uicontrol id="10">Storage</uicontrol> tab.</cmd>
                <info id="21">
                    <p id="22">For a compute node, the storage tab displays three lists:</p>
                    <dl>
                        <dlentry id="23">
                            <dt id="24">Disks</dt>
                            <dd id="25">
                                <p id="26">Physical disks installed in the compute node.</p>
                            </dd>
                        </dlentry>
                        <dlentry id="31">
                            <dt id="32">Local Volume Groups</dt>
                            <dd id="33">
                                <p id="34">Groups of physical volumes available for VM
                                    storage.</p>
                            </dd>
                        </dlentry>
                        <dlentry id="27">
                            <dt id="28">Physical Volumes</dt>
                            <dd id="29">
                                <p id="30">Partitions that have been initialized for logical
                                    volume management (LVM) and assigned to a local volume
                                    group.</p>
                            </dd>
                        </dlentry>
                    </dl>
                    <fig id="fig_atv_4s5_jr" id="35">
                        <image href="jow1426459038579.image" id="image_rhh_ps5_jr" id="36" width="6in">
                            <alt id="37">Compute Node Storage tab</alt>
                        </image>
                    </fig>
                </info>
            </step>
            <step id="step_N10042_N10027_N1001F_N10001" id="11">
                <cmd id="12">If required, add the <nameliteral id="13">nova-local</nameliteral> group to the <nameliteral id="14">Local
                        Volume Groups</nameliteral> list.</cmd>
                <info id="15">
                    <p id="16">The <nameliteral id="17">Local Volume
                            Groups</nameliteral> list displays groups of physical volumes designated
                        for use as local storage.</p>
                    <p id="18">The default group for use by VMs is called <nameliteral id="19">nova-local</nameliteral>. If this group is not listed,
                        you can create it by clicking <nameliteral id="20">Add Local Volume
                            Group</nameliteral>, and then accepting the defaults in the dialog box
                        that appears.</p>
                    <fig id="fig_wrr_vs5_jr" id="38">
                        <image href="jow1426459253956.image" id="image_ask_bt5_jr" id="39" width="5in">
                            <alt id="40">Create Local Volume Group</alt>
                        </image>
                    </fig>
                </info>
                <stepresult id="41">
                    <p id="42">The <nameliteral id="43">nova-local</nameliteral> group is shown in the list.</p>
                    <fig id="fig_i4s_p1z_jr" id="44">
                        <image href="jow1426510376255.image" id="image_w1l_z1z_jr" id="45" width="6in">
                            <alt id="46">Local Volume Groups</alt>
                        </image>
                    </fig>
                </stepresult>
            </step>
            <step id="step_N10107_N10027_N1001F_N10001" id="47">
                <cmd id="48">Add a physical volume to the <nameliteral id="49">nova-local</nameliteral> group.</cmd>
                <info id="50">
                    <p id="51">The <nameliteral id="52">Physical
                            Volumes</nameliteral> list displays LVM volumes that have been created
                        and added to a Local Volume Group. To add a new one, click <nameliteral id="53">Add Physical Volume</nameliteral> and complete the
                        dialog box that appears.</p>
                    <fig id="fig_myv_tdz_jr" id="54">
                        <image href="jow1426511807740.image" id="image_dhp_12z_jr" id="55" width="5in">
                            <alt id="56">Create Physical Volume dialog box</alt>
                        </image>
                    </fig>
                    <note id="note_N1013A_N10112_N10107_N10027_N1001F_N10001" id="59">
                        <p id="60">The <uicontrol id="61">Local Volume
                                Group</uicontrol> drop-down selection is automatically set to
                                <nameliteral id="62">nova-local</nameliteral>, and cannot be
                            changed.</p>
                    </note>
                    <p id="57">Use the <uicontrol id="58">Disks</uicontrol>
                        drop-down menu to select a disk to provide storage. For the root disk, a
                        designated partition  (<nameliteral id="98">local_pv</nameliteral>) is used.</p>
                    <p id="63">You can add any number of physical volumes to the
                            <nameliteral id="64">nova-local</nameliteral> group, limited
                        only by the number of available disks.</p>
                </info>
                <stepresult id="65">
                    <p id="66">A physical volume is created and added to the
                            <nameliteral id="67">nova-local</nameliteral> group.</p>
                    <fig id="fig_ajv_p2z_jr" id="68">
                        <image href="jow1426512224610.image" id="image_c4b_w2z_jr" id="69" width="6in">
                            <alt id="70">Physical Volumes list</alt>
                        </image>
                    </fig>
                </stepresult>
            </step>
            <step id="step_N1019C_N10027_N1001F_N10001" id="80">
                <cmd id="81">Unlock the host to make the changes take effect.</cmd>
            </step>
        </steps>
        <result id="result_N10172_N1001F_N10001" id="71">
            <p id="72">The compute host is ready to provide local  storage for use by VMs.
                Because a <nameliteral id="82">nova-local</nameliteral> local volume group
                has been added, the host is automatically included in the <nameliteral id="83">local_storage_hosts</nameliteral> host aggregate.</p>
            <p id="84">To return a host to the <nameliteral id="85">remote_storage_hosts</nameliteral> host aggregate, so that it is used to
                instantiate VMs configured for remote Cinder-based storage, delete the <nameliteral id="86">nova-local</nameliteral> local volume group.</p>
            <note id="note_N10204_N101E1_N1001F_N10001" id="103" type="caution">
                <p id="104">VMs instantiated on the compute node must be migrated or terminated before the
                    host is reconfigured for remote storage.</p>
            </note>
        </result>
        <postreq id="postreq_N1017B_N1001F_N10001" id="73">
            <p id="74">To configure a VM to use local storage or remote Cinder-based
                storage, or to be instantiated on any compute host regardless of storage type, see
                    <xref href="jow1426181040008.xml" id="75"/>. </p>
            <p id="99">To add disks to a compute node for extra local storage, see <xref href="jow1418924302353.xml" id="100"/>
            </p>
        </postreq>
    </taskbody>
</task-wr>