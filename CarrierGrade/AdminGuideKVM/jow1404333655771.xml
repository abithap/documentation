<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River Concept//EN" "concept-wr.dtd">
<concept-wr domains="(topic concept concept-wr)                            (topic hi-d)                            (topic indexing-d)                            (topic pr-d)                            (topic sw-d)                            (topic ui-d)                            (topic wr-sw-d)                            (topic xml-d)   " id="jow1404333655771" xml:lang="en-us" xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/">
    <!-- Modification History
   -->
    <title id="1">Live Migration of Virtual Machines</title>
    <shortdesc id="2">Live migration occurs when a virtual machine is transferred to execute
        on a different compute node with minimal disruption of the guest applications. This can
        happen automatically, or upon request by the system administrator.</shortdesc>
    <prolog>
        <author id="64">Jim Owens</author>
        <author id="3">Pedro Sanchez</author>
    </prolog>
    <conbody>
        <note id="note_N10026_N10023_N10001" id="65">
            <p id="66">Live migration is not currently supported for instances using the following:</p>
            <ul id="ul_ccz_fjc_gs">
                <li id="67">
                    <p id="68">PCI passthrough</p>
                </li>
                <li id="69">
                    <p id="70">SR-IOV</p>
                </li>
                <li id="71">
                    <p id="72">Local storage</p>
                </li>
            </ul>
        </note>
        <p id="4">While executing a live migration operation, the HP Helion OpenStack Carrier Grade manages
            the virtual machine's state in such a way that it appears unmodified on the migrated
            instance. This includes:</p>
        <ul id="ul_e3n_drn_j4">
            <li id="5">
                <p id="6">system memory, both kernel and user space</p>
            </li>
            <li id="7">
                <p id="8">access to all non-local storage resources, including LVM/iSCSI and
                    Cinder</p>
            </li>
            <li id="9">
                <p id="10">all the virtual machine networking options (unmodified/virtio, AVP kernel driver, AVP
          DPDK Poll Mode Driver), and AVS</p>
            </li>
        </ul>
        <p id="11">Automatic migration of virtual machines occurs whenever the administrator initiates a locking
      operation on a compute node. In this case, the HP Helion OpenStack Carrier Grade first live-migrates all virtual
      machine instances off of the compute node before administratively locking it.</p>
        <p id="12">The <nameliteral id="29">admin</nameliteral> user can also
            initiate live migrations manually from the <wintitle id="13">Instances</wintitle> page available by clicking the option <option id="14">Instances</option> on the <uicontrol id="30">Admin</uicontrol> side pane of
            the web management interface. The <option id="15">More</option> button of the
            selected instance provides the option <option id="16">Live Migrate
                Instance</option>. When selected, the <wintitle id="17">Live
                Migrate</wintitle> window is displayed as illustrated below:</p>
        <fig id="fig_N1005C_N1001C_N10001" id="18">
            <image href="jow1404333654305.image" id="image_klp_d5n_j4" id="19" width="4in"/>
        </fig>
        <p id="20">The following fields are available:</p>
        <dl>
            <dlentry id="21">
                <dt id="22">Current Host</dt>
                <dd id="23">
                    <p id="24">A read-only field displaying the compute node the selected instance is currently
            running on.</p>
                </dd>
            </dlentry>
            <dlentry id="25">
                <dt id="26">New Host</dt>
                <dd id="27">
                    <p id="28">The target compute node for the migration. The default value
                        is to let the HP Helion OpenStack Carrier Grade auto-schedule the virtual machine following
                        the current scheduling guidelines and constraints. Optionally, you can
                        manually select the target compute node.</p>
                    <p id="63">Note that the set of available target compute nodes for the
                        migration is still subject to the scheduler constraints from the virtual
                        machine flavor and other systems options that might be in place.</p>
                </dd>
            </dlentry>
        </dl>
        <section id="section_N100B6_N1001F_N10001" id="31">
            <title id="32">Live Migration and Server Group Policies</title>
            <p id="33">Virtual machines launched as part of a Server Group are subject to additional live
                migration restrictions determined by the selection of scheduling policy. See <xref href="jow1404333660893.xml" id="34"/> for details.</p>
            <dl>
                <dlentry id="35">
                    <dt id="36">Affinity policy</dt>
                    <dd id="37">
                        <p id="38">The goal of this policy is to schedule all virtual machines in the Server
                            Group to execute on the same host.</p>
                        <p id="39">If the <nameliteral id="40">Best
                                Effort</nameliteral> flag of the Server Group is clear, then the
                            individual instances cannot be migrated since this would break the
                            affinity policy.</p>
                        <p id="41">Note that this means that a compute node running
                            instances in a Server Group with affinity policy in strict mode cannot
                            be locked. An alternative mode of operation is to always set the
                                <nameliteral id="42">Best Effort</nameliteral> flag and then
                            manually migrate the instances to a common host.</p>
                        <p id="43">If the <nameliteral id="44">Best Effort</nameliteral> flag of the Server Group is
                            set, then any individual instances can migrate to any other available
                            host.</p>
                    </dd>
                </dlentry>
                <dlentry id="45">
                    <dt id="46">Anti-affinity policy</dt>
                    <dd id="47">
                        <p id="48">The goal of this policy is to schedule each virtual machine in the Server
                            Group to execute on a different host.</p>
                        <p id="49">If the <nameliteral id="50">Best
                                Effort</nameliteral> flag of the Server Group is clear, then the
                            individual instances can migrate provided that there are suitable hosts
                            where no other Server Group instance is running.</p>
                        <p id="51">If the <nameliteral id="52">Best Effort</nameliteral> flag of the Server Group is
                            set, then any individual instances can migrate to any other available
                            host.</p>
                    </dd>
                </dlentry>
            </dl>
        </section>
    </conbody>
</concept-wr>