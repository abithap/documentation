<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="jow1426181040008" xml:lang="en-us">
<!-- Modification History
        
-->
    <title id="1">Specifying Local Storage for a VM</title>
    <shortdesc id="2">You can specify instantiation on a host with local storage by using a
        flavor with the required extra specification.</shortdesc>
    <prolog>
        <author id="3">Jim Owens</author>
    </prolog>
    <taskbody>
        <context id="context_N10022_N1001F_N10001" id="358">
            <p id="356">When this extra spec is used, ephemeral disks defined for the flavor
                use local storage, allocated from the Local Volume Group on the host.  Note that the
                default is to use remote storage, but you can change the extra spec to use local
                storage. </p>
            <p id="357">If the instance is booted from an image, then the root disk also
                uses local storage. If the instance is booted from a volume, the root disk uses
                Cinder-based storage allocated from the controller (for a system using LVM) or from
                storage hosts (for a system using 3PAR).</p>
        </context>
        <prereq id="prereq_N10022_N1001F_N10001" id="8">
            <p id="9">Before you can use local storage for a VM, you must configure at least
                one compute node to provide local storage. For more information, see <xref href="jow1426183480976.xml" id="10"/>.</p>
        </prereq>
        <context id="context_N1002F_N1001F_N10001" id="11">
            <note conref="jow1426942555025.xml#jow1426942555025/note_local_storage_ephemeral" id="note_N10037_N10032_N1001F_N10001" id="81"/>
            <p id="17">To add the required extra specification to a flavor using the web
                administration interface, click <uicontrol id="78">Storage  Type</uicontrol>
                in the <uicontrol id="79">Create Flavor Extra Spec</uicontrol> drop-down
                menu, and then select the <uicontrol id="355">Local Storage</uicontrol>
                check box. To access this menu, see <xref href="jow1429538642910.xml" id="82"/>. </p>
            <p id="18">You can also specify the extra spec from the CLI by setting the
                following parameter for a flavor:</p>
            <codeblock id="20"><userinput id="22">aggregate_instance_extra_specs:local_storage=<varname id="23">loc_storage</varname></userinput></codeblock>
            <p id="24">where <varname id="25">loc_storage</varname> is one of the
                following:</p>
            <dl>
                <dlentry id="26">
                    <dt id="27">true</dt>
                    <dd id="28">
                        <p id="29">Specifies ephemeral local storage for use by the VM.</p>
                    </dd>
                </dlentry>
                <dlentry id="30">
                    <dt id="31">false</dt>
                    <dd id="32">
                        <p id="33">Specifies persistent Cinder-based storage for use by the
                            VM.</p>
                    </dd>
                </dlentry>
            </dl>
            <p id="354">For example:</p>
            <codeblock id="321"><systemoutput id="328">~(keystone_admin)$ </systemoutput><userinput id="335">nova flavor-key <varname id="346">flavor_name</varname> \
set aggregate_instance_extra_specs=<varname id="353">integer_value</varname></userinput></codeblock>
            <p id="359">The local storage key is added by default on flavor creation and set to false (remote
                storage).</p>
        </context>
    </taskbody>
</task-wr>