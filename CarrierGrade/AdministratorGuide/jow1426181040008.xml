<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="jow1426181040008" xml:lang="en-us">
<!-- Modification History
        
-->
    <title ixia_locid="1">Specifying Local Storage for a VM</title>
    <shortdesc ixia_locid="2">You can specify instantiation on a host with local storage by using a
        flavor with the required extra specification.</shortdesc>
    <prolog>
        <author ixia_locid="3">Jim Owens</author>
    </prolog>
    <taskbody>
        <context id="context_N10022_N1001F_N10001" ixia_locid="358">
            <p ixia_locid="356">When this extra spec is used, ephemeral disks defined for the flavor
                use local storage, allocated from the Local Volume Group on the host.  Note that the
                default is to use remote storage, but you can change the extra spec to use local
                storage. </p>
            <p ixia_locid="357">If the instance is booted from an image, then the root disk also
                uses local storage. If the instance is booted from a volume, the root disk uses
                Cinder-based storage allocated from the controller (for a system using LVM) or from
                storage hosts (for a system using 3PAR).</p>
        </context>
        <prereq id="prereq_N10022_N1001F_N10001" ixia_locid="8">
            <p ixia_locid="9">Before you can use local storage for a VM, you must configure at least
                one compute node to provide local storage. For more information, see <xref href="jow1426183480976.xml" ixia_locid="10"/>.</p>
        </prereq>
        <context id="context_N1002F_N1001F_N10001" ixia_locid="11">
            <note conref="jow1426942555025.xml#jow1426942555025/note_local_storage_ephemeral" id="note_N10037_N10032_N1001F_N10001" ixia_locid="81"/>
            <p ixia_locid="17">To add the required extra specification to a flavor using the web
                administration interface, click <uicontrol ixia_locid="78">Storage  Type</uicontrol>
                in the <uicontrol ixia_locid="79">Create Flavor Extra Spec</uicontrol> drop-down
                menu, and then select the <uicontrol ixia_locid="355">Local Storage</uicontrol>
                check box. To access this menu, see <xref href="jow1429538642910.xml" ixia_locid="82"/>. </p>
            <p ixia_locid="18">You can also specify the extra spec from the CLI by setting the
                following parameter for a flavor:</p>
            <codeblock ixia_locid="20"><userinput ixia_locid="22">aggregate_instance_extra_specs:local_storage=<varname ixia_locid="23">loc_storage</varname></userinput></codeblock>
            <p ixia_locid="24">where <varname ixia_locid="25">loc_storage</varname> is one of the
                following:</p>
            <dl>
                <dlentry ixia_locid="26">
                    <dt ixia_locid="27">true</dt>
                    <dd ixia_locid="28">
                        <p ixia_locid="29">Specifies ephemeral local storage for use by the VM.</p>
                    </dd>
                </dlentry>
                <dlentry ixia_locid="30">
                    <dt ixia_locid="31">false</dt>
                    <dd ixia_locid="32">
                        <p ixia_locid="33">Specifies persistent Cinder-based storage for use by the
                            VM.</p>
                    </dd>
                </dlentry>
            </dl>
            <p ixia_locid="354">For example:</p>
            <codeblock ixia_locid="321"><systemoutput ixia_locid="328">~(keystone_admin)$ </systemoutput><userinput ixia_locid="335">nova flavor-key <varname ixia_locid="346">flavor_name</varname> \
set aggregate_instance_extra_specs=<varname ixia_locid="353">integer_value</varname></userinput></codeblock>
            <p ixia_locid="359">The local storage key is added by default on flavor creation and set to false (remote
                storage).</p>
        </context>
    </taskbody>
</task-wr>