<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_database_create_cluster_cli">
  <title>Creating a database cluster from the command line</title>
  <body>
    <p>This topic describes how to create a database cluster from the command line.</p>
    <ol>
      <li>Log in to the installer node for your Helion OpenStack environment and source the service.osrc file:
        <codeblock>. service.osrc</codeblock></li>
      <li>Use the <codeph>trove cluster-create</codeph> command to create the new database. The syntax is as follows:
      <codeblock>trove cluster-create &lt;name&gt; &lt;datastore&gt; &lt;datastore_version&gt; [--instance &lt;flavor=flavor_name_or_id,volume=volume&gt;]</codeblock>
        <ul><li>To view the valid <b>datastore</b> values, use <codeph>trove datastore-list</codeph>.</li>
        <li>To view the valid <b>datastore_version</b> values, use <codeph>trove datastore-version-list &lt;datastore&gt;</codeph>, where <b>datastore</b> is the
          name of the datastore (e.g. <b>mysql</b>.)</li>
        </ul>
        <note>MongoDB instances require a minimum volume size of 5.</note>
      </li>
      <li>To verify that the cluster was created, use the <codeph>trove cluster-list</codeph> command.
      </li>
      <li>To list the databases that are part of a cluster, use the <codeph>trove list --include-clustered</codeph> command.
      </li>
      
    </ol>
    
    <section id="examples"><title>Examples</title>
    <dl>
      <dlentry>
        <dt>Example 1: Create a MySql cluster called MyCluster with three database instances of flavor m1.medium and volume size 3</dt>
        <dd><codeblock>trove cluster-create MyCluster mysql-cluster 5.5 --instance flavor=3,volume=3 --instance flavor=3,volume=3 --instance flavor=3,volume=3 </codeblock></dd>
      </dlentry>
      <dlentry>
        <dt>Example 2: Create a Redis cluster called MyRedisCluster with two database instances of flavor m1.small and volume size 4</dt>
        <dd><codeblock>trove cluster-create MyRedisCluster redis 3.0 --instance flavor=2,volume=4 --instance flavor=2,volume=4</codeblock></dd>
      </dlentry>
      <dlentry>
        <dt>Example 3: Create a MongoDB cluster called MyMongoDBCluster with three database instances of flavor m1.large and volume size 2</dt>
        <dd><codeblock>trove cluster-create MyMongoDBCluster mongodb 3.0 --instance flavor=4,volume=5 --instance flavor=4,volume=5 --instance flavor=4,volume=5</codeblock></dd>
      </dlentry>
      
    </dl></section>
  </body>
</topic>
